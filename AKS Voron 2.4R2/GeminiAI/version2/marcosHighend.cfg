# G32 (The "Get Ready" Shortcut)
# This is the classic Voron macro. In the early days, you had to type G28, QUAD_GANTRY_LEVEL, and G28 again every time. G32 does it all in one click and parks the toolhead in the center.

[gcode_macro G32]
description: Clears bed, homes, QGLs, and parks.
gcode:
    SAVE_GCODE_STATE NAME=STATE_G32
    G90
    G28
    QUAD_GANTRY_LEVEL
    G28
    # Go to center (uses your brush variables for consistency or hardcoded)
    G0 X175 Y175 Z30 F3600
    RESTORE_GCODE_STATE NAME=STATE_G32

# OFF (The "Kill Switch")
# A quick way to shut everything down safely without turning off the power supply.    

[gcode_macro OFF]
description: Safely turns off heaters, fans, and motors
gcode:
    M84                                  ; Turn off motors
    TURN_OFF_HEATERS                     ; Turn off bed and nozzle
    M107                                 ; Turn off part fan
    SET_FAN_SPEED FAN=nevermore SPEED=0  ; Turn off filter
    SET_LED LED=sb_leds RED=0 GREEN=0 BLUE=0 WHITE=0 ; Turn off LEDs


# PID_TUNE_ALL (Maintenance Helper)
# You don't want to remember the PID tuning commands every time you change a part. This macro runs them for you. Note: It turns on the fans to simulate real printing conditions.

[gcode_macro PID_TUNE_ALL]
description: PID Tunes Bed (60c) and Nozzle (210c) with fans on
gcode:
    {% set BED_TEMP = params.BED|default(60)|float %}
    {% set EXTRUDER_TEMP = params.EXTRUDER|default(210)|float %}
    
    M118 Starting PID Tuning...
    G28
    G0 Z10 F3000
    M106 S64  ; Turn on part fan to 25% (Simulate printing)
    
    M118 Tuning Bed to {BED_TEMP}C...
    PID_CALIBRATE HEATER=heater_bed TARGET={BED_TEMP}
    
    M118 Tuning Nozzle to {EXTRUDER_TEMP}C...
    PID_CALIBRATE HEATER=extruder TARGET={EXTRUDER_TEMP}
    
    M118 PID Tuning Complete. Save config!
    M107

# . Input Shaper Shortcuts (For your ADXL)
# Since you have the ADXL345 built into your SB2240, you should use it! These macros verify your "Z-Belt Tension" and generate your Shaper Graphs.    
[gcode_macro EXCITATE_AXIS_SHAPER]
description: Runs input shaper on X or Y
gcode:
    {% set AXIS = params.AXIS|default("X")|upper %}
    G28
    SHAPER_CALIBRATE AXIS={AXIS}



# #TODO: Check BELOW
# 5. The "Famous" Missing Link: KAMP
# I cannot write this into a single file because it is a suite of macros, but I must mention it because it is the standard for modern Vorons.

# KAMP (Klipper Adaptive Meshing & Purging)

# What it does: If you print a small 50mm cube in the corner, KAMP only creates a bed mesh for that small corner, not the whole bed. It is much faster and more accurate.

# Purging: instead of a straight line, it draws a "Voron Logo" pattern right next to your print to purge the nozzle.

# How to get it:

# SSH into your Pi.

# Run kiauh (if you have it installed) or clone the KAMP repository.

# Add [include KAMP_Settings.cfg] to your printer.cfg.

# It automatically upgrades your PRINT_START.

# Summary of your Macro Collection
# With these additions, your config/macros.cfg now covers:

# Automation: PRINT_START, PRINT_END, G32

# Safety: OFF, CANCEL_PRINT, _HOME_X/Y (Sensorless)

# Maintenance: PID_TUNE_ALL, NOZZLE_WIPE, TEST_SPEED, EXCITATE_AXIS_SHAPER

# Convenience: LOAD/UNLOAD, M600, PARK_...







